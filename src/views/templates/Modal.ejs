<!-- CSS only -->
<link
href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
rel="stylesheet"
integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
crossorigin="anonymous"
/>
<!-- Modal -->
<div class="modal fade" id="modal_info_persona" tabindex="-1" aria-labelledby="modal_info_persona_label" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modal_info_persona_label">
          <i class="fas fa-user-circle"></i>
          Información
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Start -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Personal</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="referencia-tab" data-bs-toggle="tab" data-bs-target="#referencia" type="button" role="tab" aria-controls="referencia" aria-selected="false">Referencia</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="estudios-tab" data-bs-toggle="tab" data-bs-target="#estudios" type="button" role="tab" aria-controls="estudios" aria-selected="false">Estudios</button>
          </li>
        </ul>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
            <form class="row g-3">
              <div class="col-md-4">
                <label for="read_id" class="form-label">Id</label>
                <input type="text" class="form-control bg-light" id="read_id" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_sexo" class="form-label">Sexo</label>
                <input type="text" class="form-control bg-light" id="read_sexo" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_nacionalidad" class="form-label">Nacionalidad</label>
                <input type="text" class="form-control bg-light" id="read_nacionalidad" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_escolaridad" class="form-label">Escolaridad</label>
                <input type="text" class="form-control bg-light" id="read_escolaridad" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_cargo" class="form-label">Cargo</label>
                <input type="text" class="form-control bg-light" id="read_cargo" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_departamento" class="form-label">Departamento</label>
                <input type="text" class="form-control bg-light" id="read_departamento" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_nombres" class="form-label">Nombres</label>
                <input type="text" class="form-control bg-light" id="read_nombres" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_apellidos" class="form-label">Apellidos</label>
                <input type="text" class="form-control bg-light" id="read_apellidos" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_f_nacimiento" class="form-label">Fecha de nacimiento</label>
                <input type="text" class="form-control bg-light" id="read_f_nacimiento" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_celular" class="form-label">Celular</label>
                <input type="text" class="form-control bg-light" id="read_celular" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_correo" class="form-label">Correo</label>
                <input type="text" class="form-control bg-light" id="read_correo" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_direccion" class="form-label">Dirección</label>
                <input type="text" class="form-control bg-light" id="read_direccion" disabled readonly>
              </div>
            </form>
          </div>
          <div class="tab-pane fade" id="referencia" role="tabpanel" aria-labelledby="referencia-tab">
            <form class="row g-3">
              <div class="col-md-4">
                <label for="read_id_r" class="form-label">Id</label>
                <input type="text" class="form-control bg-light" id="read_id_r" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_nombres_r" class="form-label">Nombres</label>
                <input type="text" class="form-control bg-light" id="read_nombres_r" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_apellidos_r" class="form-label">Apellidos</label>
                <input type="text" class="form-control bg-light" id="read_apellidos_r" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_correo_r" class="form-label">Correo</label>
                <input type="text" class="form-control bg-light" id="read_correo_r" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_celular_r" class="form-label">Celular</label>
                <input type="text" class="form-control bg-light" id="read_celular_r" disabled readonly>
              </div>
              <div class="col-md-4">
                <label for="read_direccion_r" class="form-label">Dirección</label>
                <input type="text" class="form-control bg-light" id="read_direccion_r" disabled readonly>
              </div>
            </form>
          </div>
          <div class="tab-pane fade" id="estudios" role="tabpanel" aria-labelledby="estudios-tab">
            <form class="row g-3">
              <div class="col-md-6">
                <label for="read_institucion" class="form-label">Nombre institución</label>
                <input type="text" class="form-control bg-light" id="read_institucion" disabled readonly>
              </div>
              <div class="col-md-6">
                <label for="read_titulo" class="form-label">Título obtenido</label>
                <input type="text" class="form-control bg-light" id="read_titulo" disabled readonly>
              </div>
              <div class="col-md-6">
                <label for="read_f_inicio" class="form-label">Fecha de inicio</label>
                <input type="text" class="form-control bg-light" id="read_f_inicio" disabled readonly>
              </div>
              <div class="col-md-6">
                <label for="read_f_final" class="form-label">Fecha de finalización</label>
                <input type="text" class="form-control bg-light" id="read_f_final" disabled readonly>
              </div>
            </form>
          </div>
        </div>
        <!-- End -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="btn_cerrar_modal" data-bs-dismiss="modal">
          &nbsp; &nbsp; Cerrar &nbsp; &nbsp;
        </button>
      </div>
    </div>
  </div>
</div>
<!-- End modal -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script>
  let modal_info_persona = document.getElementById("modal_info_persona");
  modal_info_persona.addEventListener("show.bs.modal", function (event) {
    //Obtener los datos del botón
    let icon_eye = event.relatedTarget;
    //Obtener el atributo id del botón
    let id = icon_eye.getAttribute("data-bs-id");
    //'Leer' el botón confirmar del modal
    let btn_cerrar_modal = document.querySelector(
      ".modal-footer #btn_cerrar_modal"
    );
    //Asignar al atributo id a el botón confirmar del modal
    btn_cerrar_modal.value = id;
  });
  function setModalPersona() {
    var id_btn = document.getElementById("btn_cerrar_modal").value;
    const read_id = document.getElementById("read_id");
    const read_sexo = document.getElementById("read_sexo");
    const read_nacionalidad = document.getElementById("read_nacionalidad");
    const read_escolaridad = document.getElementById("read_escolaridad");
    const read_cargo = document.getElementById("read_cargo");
    const read_departamento = document.getElementById("read_departamento");
    const read_nombres = document.getElementById("read_nombres");
    const read_apellidos = document.getElementById("read_apellidos");
    const read_f_nacimiento = document.getElementById("read_f_nacimiento");
    const read_celular = document.getElementById("read_celular");
    const read_correo = document.getElementById("read_correo");
    const read_direccion = document.getElementById("read_direccion");
    const read_id_r = document.getElementById("read_id_r");
    const read_nombres_r = document.getElementById("read_nombres_r");
    const read_apellidos_r = document.getElementById("read_apellidos_r");
    const read_correo_r = document.getElementById("read_correo_r");
    const read_celular_r = document.getElementById("read_celular_r");
    const read_direccion_r = document.getElementById("read_direccion_r");
    const read_institucion = document.getElementById("read_institucion");
    const read_titulo = document.getElementById("read_titulo");
    const read_f_inicio = document.getElementById("read_f_inicio");
    const read_f_final = document.getElementById("read_f_final");

    let url = "/post-persona";
        let json = JSON.stringify({
          id: id_btn,
          accion: "set_modal_persona"
        });
        fetch(url, {
          method: "POST",
          headers: { "content-type": "application/json" },
          body: json,
        })
          .then((res) => res.json())
          .then((data) => {
            for (var i = 0; i < data.length; i++) {
              read_id.value = data[0].id;
              read_sexo.value = data[0].sexo;
              read_nacionalidad.value = data[0].nacionalidad;
              read_escolaridad.value = data[0].escolaridad;
              read_cargo.value = data[0].cargo;
              read_departamento.value = data[0].departamento;
              read_nombres.value = data[0].nombres;
              read_apellidos.value = data[0].apellidos;
              read_f_nacimiento.value = data[0].f_nacimiento.substring(0, 10);;
              read_celular.value = data[0].celular;
              read_correo.value = data[0].correo;
              read_direccion.value = data[0].direccion;
              read_id_r.value = data[0].id_r;
              read_nombres_r.value = data[0].nombre_r;
              read_apellidos_r.value = data[0].apellido_r;
              read_correo_r.value = data[0].correo_r;
              read_celular_r.value = data[0].celular_r;
              read_direccion_r.value = data[0].direccion_r;
              read_institucion.value = data[0].institucion;
              read_titulo.value = data[0].titulo;
              read_f_inicio.value = data[0].f_inicio.substring(0, 10);;
              read_f_final.value = data[0].f_fin.substring(0, 10);;
            }
          })
          .catch((error) => console.log(error));
  }
</script>